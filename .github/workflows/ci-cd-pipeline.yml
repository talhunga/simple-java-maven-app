name: Hello world!

on:
  push:
    branches: ["master"]

jobs:
  build-test:
    runs-on: ubuntu-latest  # GitHub-hosted runner

    steps:
    - name: fetch repository to runner
      uses: actions/checkout@v4  # Fetches the repo

    - name: versioning tracking
      run: echo "VERSION=1.0.${{ github.run_number }}" >> $GITHUB_ENV

    - name: build docker image
      run: docker build -t java-hello-world:${{ env.VERSION }} .

    - name: log in to docker hub
      uses: docker/login-action
      with:
        username: ${{ secrets.DOCKERHUB_USERNAME }}
        passwords: ${{ secrets.DOCKERHUB_PASSWORD }}

         
    - name: Build and push
      uses: docker/build-push-action@v6
      with:
       push: true
       tags: java-hello-world:${{ env.VERSION }}
